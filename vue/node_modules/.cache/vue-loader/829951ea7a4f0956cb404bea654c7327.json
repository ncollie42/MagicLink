{"remainingRequest":"/home/Nico/Github/MagicLink/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/Nico/Github/MagicLink/vue/src/views/confirmation.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/Nico/Github/MagicLink/vue/src/views/confirmation.vue","mtime":1589501287411},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgZ3JwYyB9IGZyb20gIkBpbXByb2JhYmxlLWVuZy9ncnBjLXdlYiI7CmltcG9ydCB7IExvZ2luIH0gZnJvbSAiLi4vbG9naW5nUlBDL2xvZ2luX3BiX3NlcnZpY2UiOyAvL3NlcnZpY2UKaW1wb3J0IHsgY29kZSB9IGZyb20gIi4uL2xvZ2luZ1JQQy9sb2dpbl9wYiI7IC8vdHlwZQppbXBvcnQgc3VjY2VzcyBmcm9tICIuLi9jb21wb25lbnRzL2NvbmZpcm1hdGlvbl9zdWNjZXNzLnZ1ZSIKaW1wb3J0IHdhaXRpbmcgZnJvbSAiLi4vY29tcG9uZW50cy9jb25maXJtYXRpb25fd2FpdGluZy52dWUiCmltcG9ydCBlcnJvciBmcm9tICIuLi9jb21wb25lbnRzL2NvbmZpcm1hdGlvbl9lcnJvci52dWUiCgpjb25zdCBTdGF0ZSA9IHsKICAgIFdhaXRpbmc6IDEsCiAgICBTdWNjZXM6IDIsCiAgICBFcnJvcjogMywKfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgc3VjY2VzcywKICAgICAgICB3YWl0aW5nLAogICAgICAgIGVycm9yCiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjdXJyZW50U3RhdGU6IFN0YXRlLldhaXRpbmcsCiAgICAgICAgICAgIFN0YXRlLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKCiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy4kcm91dGUucXVlcnkKICAgICAgICBpZiAocXVlcnkuY29kZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gU3RhdGUuRXJyb3IKICAgICAgICAgICAgcmV0dXJuIAogICAgICAgIH0KCiAgICAgICAgY29uc3Qgc2VuZGluZ0NvZGUgPSBuZXcgY29kZSgpOwogICAgICAgIHNlbmRpbmdDb2RlLnNldENvZGUocXVlcnkuY29kZSk7CgogICAgICAgIGdycGMudW5hcnkoTG9naW4uY29uZmlybUxvZ2luLCB7CiAgICAgICAgICAgIHJlcXVlc3Q6IHNlbmRpbmdDb2RlLAogICAgICAgICAgICBob3N0OiB0aGlzLiRob3N0bmFtZSwKICAgICAgICAgICAgb25FbmQ6IHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB7IHN0YXR1cywgc3RhdHVzTWVzc2FnZSwgaGVhZGVycywgbWVzc2FnZSwgdHJhaWxlcnMgfSA9IHJlczsKICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGdycGMuQ29kZS5PSyAmJiBtZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBTdGF0ZS5TdWNjZXMKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic3RhdHVzOiIsIHN0YXR1cywgc3RhdHVzTWVzc2FnZSwgaGVhZGVycywgbWVzc2FnZSwgdHJhaWxlcnMpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBTdGF0ZS5FcnJvcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0KfSkK"},{"version":3,"sources":["confirmation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"confirmation.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <img src=\"@/assets/background.svg\" alt=\"\">\n        <div class=\"container\">\n            <div class=\"containerInner\">\n            <waiting v-if=\"currentState == State.Waiting\"/>\n            <error v-else-if=\"currentState == State.Error\"/>\n            <success v-else-if=\"currentState == State.Succes\"/>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped>\nimg {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    position: absolute;\n}\n</style>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { grpc } from \"@improbable-eng/grpc-web\";\nimport { Login } from \"../logingRPC/login_pb_service\"; //service\nimport { code } from \"../logingRPC/login_pb\"; //type\nimport success from \"../components/confirmation_success.vue\"\nimport waiting from \"../components/confirmation_waiting.vue\"\nimport error from \"../components/confirmation_error.vue\"\n\nconst State = {\n    Waiting: 1,\n    Succes: 2,\n    Error: 3,\n}\n\nexport default Vue.extend({\n    components: {\n        success,\n        waiting,\n        error\n    },\n    data: function(){\n        return {\n            currentState: State.Waiting,\n            State,\n        }\n    },\n    created: function() {\n\n        let query = this.$route.query\n        if (query.code === undefined) {\n            this.currentState = State.Error\n            return \n        }\n\n        const sendingCode = new code();\n        sendingCode.setCode(query.code);\n\n        grpc.unary(Login.confirmLogin, {\n            request: sendingCode,\n            host: this.$hostname,\n            onEnd: res => {\n                const { status, statusMessage, headers, message, trailers } = res;\n                if (status === grpc.Code.OK && message) {\n                    this.currentState = State.Succes\n                } else {\n                console.log(\"status:\", status, statusMessage, headers, message, trailers)\n                    this.currentState = State.Error\n                }\n            }\n        })\n    }\n})\n</script>\n"]}]}