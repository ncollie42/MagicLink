{"remainingRequest":"/home/Nico/Github/MagicLink/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/Nico/Github/MagicLink/vue/src/views/confirmation.vue?vue&type=style&index=0&id=721d16cf&scoped=true&lang=css&","dependencies":[{"path":"/home/Nico/Github/MagicLink/vue/src/views/confirmation.vue","mtime":1589501287411},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/Nico/Github/MagicLink/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgppbWcgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKfQo="},{"version":3,"sources":["confirmation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA","file":"confirmation.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <img src=\"@/assets/background.svg\" alt=\"\">\n        <div class=\"container\">\n            <div class=\"containerInner\">\n            <waiting v-if=\"currentState == State.Waiting\"/>\n            <error v-else-if=\"currentState == State.Error\"/>\n            <success v-else-if=\"currentState == State.Succes\"/>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped>\nimg {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    position: absolute;\n}\n</style>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { grpc } from \"@improbable-eng/grpc-web\";\nimport { Login } from \"../logingRPC/login_pb_service\"; //service\nimport { code } from \"../logingRPC/login_pb\"; //type\nimport success from \"../components/confirmation_success.vue\"\nimport waiting from \"../components/confirmation_waiting.vue\"\nimport error from \"../components/confirmation_error.vue\"\n\nconst State = {\n    Waiting: 1,\n    Succes: 2,\n    Error: 3,\n}\n\nexport default Vue.extend({\n    components: {\n        success,\n        waiting,\n        error\n    },\n    data: function(){\n        return {\n            currentState: State.Waiting,\n            State,\n        }\n    },\n    created: function() {\n\n        let query = this.$route.query\n        if (query.code === undefined) {\n            this.currentState = State.Error\n            return \n        }\n\n        const sendingCode = new code();\n        sendingCode.setCode(query.code);\n\n        grpc.unary(Login.confirmLogin, {\n            request: sendingCode,\n            host: this.$hostname,\n            onEnd: res => {\n                const { status, statusMessage, headers, message, trailers } = res;\n                if (status === grpc.Code.OK && message) {\n                    this.currentState = State.Succes\n                } else {\n                console.log(\"status:\", status, statusMessage, headers, message, trailers)\n                    this.currentState = State.Error\n                }\n            }\n        })\n    }\n})\n</script>\n"]}]}